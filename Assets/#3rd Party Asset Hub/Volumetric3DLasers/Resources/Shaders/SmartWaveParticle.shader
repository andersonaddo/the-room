// Shader created with Shader Forge v1.38 
// Shader Forge (c) Neat Corporation / Joachim Holmer - http://www.acegikmo.com/shaderforge/
// Note: Manually altering this data may prevent you from opening it in Shader Forge
/*SF_DATA;ver:1.38;sub:START;pass:START;ps:flbk:,iptp:0,cusa:False,bamd:0,cgin:,lico:1,lgpr:1,limd:0,spmd:1,trmd:0,grmd:0,uamb:True,mssp:True,bkdf:False,hqlp:False,rprd:False,enco:False,rmgx:True,imps:True,rpth:0,vtps:0,hqsc:True,nrmq:1,nrsp:0,vomd:0,spxs:False,tesm:0,olmd:1,culm:2,bsrc:0,bdst:0,dpts:2,wrdp:False,dith:0,atcv:False,rfrpo:True,rfrpn:Refraction,coma:15,ufog:True,aust:True,igpj:True,qofs:0,qpre:3,rntp:2,fgom:False,fgoc:True,fgod:False,fgor:False,fgmd:0,fgcr:0,fgcg:0,fgcb:0,fgca:1,fgde:0.01,fgrn:0,fgrf:300,stcl:False,atwp:False,stva:128,stmr:255,stmw:255,stcp:6,stps:0,stfa:0,stfz:0,ofsf:0,ofsu:0,f2p0:False,fnsp:True,fnfb:True,fsmp:False;n:type:ShaderForge.SFN_Final,id:4795,x:32962,y:32693,varname:node_4795,prsc:2|emission-1516-OUT;n:type:ShaderForge.SFN_Tex2d,id:2701,x:31628,y:32723,ptovrint:False,ptlb:Core,ptin:_Core,varname:node_2701,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,ntxv:0,isnm:False|UVIN-5408-OUT;n:type:ShaderForge.SFN_TexCoord,id:2677,x:30978,y:32650,varname:node_2677,prsc:2,uv:0,uaff:True;n:type:ShaderForge.SFN_Add,id:2717,x:31210,y:32759,varname:node_2717,prsc:2|A-2677-V,B-2677-Z;n:type:ShaderForge.SFN_Append,id:5408,x:31421,y:32723,varname:node_5408,prsc:2|A-2677-U,B-2717-OUT;n:type:ShaderForge.SFN_Tex2d,id:99,x:31628,y:32907,ptovrint:False,ptlb:Mask,ptin:_Mask,varname:node_99,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,ntxv:0,isnm:False;n:type:ShaderForge.SFN_Fresnel,id:7745,x:31468,y:33067,varname:node_7745,prsc:2;n:type:ShaderForge.SFN_OneMinus,id:2839,x:31628,y:33067,varname:node_2839,prsc:2|IN-7745-OUT;n:type:ShaderForge.SFN_Multiply,id:1516,x:32435,y:33024,varname:node_1516,prsc:2|A-9384-OUT,B-8496-OUT,C-7529-RGB,D-7247-OUT,E-9430-OUT;n:type:ShaderForge.SFN_Slider,id:8496,x:32006,y:33105,ptovrint:False,ptlb:Final Power,ptin:_FinalPower,varname:node_8496,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,min:0,cur:1,max:10;n:type:ShaderForge.SFN_Multiply,id:9384,x:32006,y:32930,varname:node_9384,prsc:2|A-2701-R,B-99-R,C-2839-OUT,D-8937-RGB;n:type:ShaderForge.SFN_Color,id:7529,x:32163,y:33206,ptovrint:False,ptlb:Final Color,ptin:_FinalColor,varname:node_7529,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,c1:0.5,c2:0.5,c3:0.5,c4:1;n:type:ShaderForge.SFN_VertexColor,id:8937,x:31628,y:33205,varname:node_8937,prsc:2;n:type:ShaderForge.SFN_Vector4Property,id:1866,x:29964,y:31981,ptovrint:False,ptlb:_StartLaserPosition,ptin:_StartLaserPosition,varname:node_1866,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:0.5,v2:0.5,v3:0.5,v4:1;n:type:ShaderForge.SFN_Distance,id:2599,x:30190,y:32052,varname:node_2599,prsc:2|A-1866-XYZ,B-6880-XYZ;n:type:ShaderForge.SFN_FragmentPosition,id:6880,x:29964,y:32136,varname:node_6880,prsc:2;n:type:ShaderForge.SFN_OneMinus,id:8243,x:30353,y:32052,varname:node_8243,prsc:2|IN-2599-OUT;n:type:ShaderForge.SFN_Add,id:965,x:31277,y:32035,varname:node_965,prsc:2|A-3590-OUT,B-7494-OUT;n:type:ShaderForge.SFN_ValueProperty,id:2533,x:30877,y:32238,ptovrint:False,ptlb:Start Point Mask Add,ptin:_StartPointMaskAdd,varname:node_2533,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:0;n:type:ShaderForge.SFN_RemapRangeAdvanced,id:5113,x:31717,y:32118,varname:node_5113,prsc:2|IN-965-OUT,IMIN-8907-OUT,IMAX-2000-OUT,OMIN-8907-OUT,OMAX-8207-OUT;n:type:ShaderForge.SFN_Vector1,id:8207,x:31277,y:32224,varname:node_8207,prsc:2,v1:1;n:type:ShaderForge.SFN_Vector1,id:8907,x:31277,y:32166,varname:node_8907,prsc:2,v1:0;n:type:ShaderForge.SFN_Add,id:2000,x:31453,y:32235,varname:node_2000,prsc:2|A-8207-OUT,B-7494-OUT;n:type:ShaderForge.SFN_Set,id:5205,x:32244,y:32167,varname:DistanceMask,prsc:2|IN-679-OUT;n:type:ShaderForge.SFN_Clamp01,id:4000,x:31888,y:32118,varname:node_4000,prsc:2|IN-5113-OUT;n:type:ShaderForge.SFN_Multiply,id:679,x:32083,y:32167,varname:node_679,prsc:2|A-4315-OUT,B-2982-OUT;n:type:ShaderForge.SFN_Slider,id:2982,x:31731,y:32271,ptovrint:False,ptlb:Start Point Mask Multiply,ptin:_StartPointMaskMultiply,varname:node_2982,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,min:0,cur:2,max:10;n:type:ShaderForge.SFN_Get,id:7247,x:32142,y:33360,varname:node_7247,prsc:2|IN-5556-OUT;n:type:ShaderForge.SFN_Distance,id:8618,x:30970,y:30508,varname:node_8618,prsc:2|A-2656-XYZ,B-1130-XYZ;n:type:ShaderForge.SFN_FragmentPosition,id:1130,x:30763,y:30565,varname:node_1130,prsc:2;n:type:ShaderForge.SFN_Add,id:3348,x:31342,y:30584,varname:node_3348,prsc:2|A-8618-OUT,B-559-OUT;n:type:ShaderForge.SFN_Set,id:6326,x:32678,y:30678,varname:WaveMask0,prsc:2|IN-4826-OUT;n:type:ShaderForge.SFN_Set,id:5556,x:33648,y:31801,varname:FinalMask,prsc:2|IN-8786-OUT;n:type:ShaderForge.SFN_Get,id:8222,x:32696,y:31671,varname:node_8222,prsc:2|IN-6326-OUT;n:type:ShaderForge.SFN_Get,id:1597,x:32895,y:32031,varname:node_1597,prsc:2|IN-5205-OUT;n:type:ShaderForge.SFN_Add,id:7154,x:32892,y:31671,varname:node_7154,prsc:2|A-2544-OUT,B-8222-OUT,C-9340-OUT,D-9645-OUT,E-8510-OUT;n:type:ShaderForge.SFN_Clamp01,id:8786,x:33484,y:31801,varname:node_8786,prsc:2|IN-8185-OUT;n:type:ShaderForge.SFN_Vector4Property,id:2656,x:30763,y:30413,ptovrint:False,ptlb:_ControlParticlePosition0,ptin:_ControlParticlePosition0,varname:node_2656,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:0.5,v2:0.5,v3:0.5,v4:1;n:type:ShaderForge.SFN_ValueProperty,id:8424,x:30564,y:30710,ptovrint:False,ptlb:_ControlParticleSize0,ptin:_ControlParticleSize0,varname:node_8424,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:1;n:type:ShaderForge.SFN_Multiply,id:6272,x:31565,y:30628,varname:node_6272,prsc:2|A-3348-OUT,B-4974-OUT;n:type:ShaderForge.SFN_ValueProperty,id:5733,x:30199,y:31687,ptovrint:False,ptlb:Wave Length,ptin:_WaveLength,varname:node_5733,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:1;n:type:ShaderForge.SFN_Clamp,id:2156,x:31817,y:30677,varname:node_2156,prsc:2|IN-6272-OUT,MIN-8902-OUT,MAX-2433-OUT;n:type:ShaderForge.SFN_Frac,id:1098,x:31991,y:30677,varname:node_1098,prsc:2|IN-2156-OUT;n:type:ShaderForge.SFN_Multiply,id:8856,x:32173,y:30636,varname:node_8856,prsc:2|A-9548-OUT,B-1098-OUT;n:type:ShaderForge.SFN_Vector1,id:9548,x:31991,y:30613,varname:node_9548,prsc:2,v1:2;n:type:ShaderForge.SFN_Subtract,id:2294,x:32356,y:30678,varname:node_2294,prsc:2|A-8856-OUT,B-5043-OUT;n:type:ShaderForge.SFN_Vector1,id:5043,x:32173,y:30766,varname:node_5043,prsc:2,v1:1;n:type:ShaderForge.SFN_Abs,id:4826,x:32520,y:30678,varname:node_4826,prsc:2|IN-2294-OUT;n:type:ShaderForge.SFN_Vector1,id:8902,x:31565,y:30761,varname:node_8902,prsc:2,v1:-0.5;n:type:ShaderForge.SFN_Vector1,id:2433,x:31565,y:30833,varname:node_2433,prsc:2,v1:0.5;n:type:ShaderForge.SFN_OneMinus,id:559,x:30970,y:30679,varname:node_559,prsc:2|IN-7706-OUT;n:type:ShaderForge.SFN_Set,id:6147,x:30596,y:31687,varname:WL,prsc:2|IN-4308-OUT;n:type:ShaderForge.SFN_Get,id:4974,x:31321,y:30708,varname:node_4974,prsc:2|IN-6147-OUT;n:type:ShaderForge.SFN_Distance,id:3639,x:30962,y:30022,varname:node_3639,prsc:2|A-3243-XYZ,B-5284-XYZ;n:type:ShaderForge.SFN_FragmentPosition,id:5284,x:30755,y:30079,varname:node_5284,prsc:2;n:type:ShaderForge.SFN_Add,id:9200,x:31334,y:30098,varname:node_9200,prsc:2|A-3639-OUT,B-4738-OUT;n:type:ShaderForge.SFN_Set,id:571,x:32670,y:30192,varname:WaveMask1,prsc:2|IN-4117-OUT;n:type:ShaderForge.SFN_Vector4Property,id:3243,x:30755,y:29927,ptovrint:False,ptlb:_ControlParticlePosition1,ptin:_ControlParticlePosition1,varname:__ControlParticlePosition1,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:0.5,v2:0.5,v3:0.5,v4:1;n:type:ShaderForge.SFN_ValueProperty,id:8005,x:30577,y:30212,ptovrint:False,ptlb:_ControlParticleSize1,ptin:_ControlParticleSize1,varname:__ControlParticleSize1,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:1;n:type:ShaderForge.SFN_Multiply,id:9565,x:31557,y:30142,varname:node_9565,prsc:2|A-9200-OUT,B-3269-OUT;n:type:ShaderForge.SFN_Clamp,id:5721,x:31809,y:30191,varname:node_5721,prsc:2|IN-9565-OUT,MIN-7077-OUT,MAX-5493-OUT;n:type:ShaderForge.SFN_Frac,id:1641,x:31983,y:30191,varname:node_1641,prsc:2|IN-5721-OUT;n:type:ShaderForge.SFN_Multiply,id:370,x:32165,y:30150,varname:node_370,prsc:2|A-6219-OUT,B-1641-OUT;n:type:ShaderForge.SFN_Vector1,id:6219,x:31983,y:30127,varname:node_6219,prsc:2,v1:2;n:type:ShaderForge.SFN_Subtract,id:4416,x:32348,y:30192,varname:node_4416,prsc:2|A-370-OUT,B-4210-OUT;n:type:ShaderForge.SFN_Vector1,id:4210,x:32165,y:30280,varname:node_4210,prsc:2,v1:1;n:type:ShaderForge.SFN_Abs,id:4117,x:32512,y:30192,varname:node_4117,prsc:2|IN-4416-OUT;n:type:ShaderForge.SFN_Vector1,id:7077,x:31557,y:30275,varname:node_7077,prsc:2,v1:-0.5;n:type:ShaderForge.SFN_Vector1,id:5493,x:31557,y:30347,varname:node_5493,prsc:2,v1:0.5;n:type:ShaderForge.SFN_OneMinus,id:4738,x:30962,y:30193,varname:node_4738,prsc:2|IN-1570-OUT;n:type:ShaderForge.SFN_Get,id:3269,x:31313,y:30222,varname:node_3269,prsc:2|IN-6147-OUT;n:type:ShaderForge.SFN_Distance,id:8428,x:30962,y:29528,varname:node_8428,prsc:2|A-599-XYZ,B-1903-XYZ;n:type:ShaderForge.SFN_FragmentPosition,id:1903,x:30755,y:29585,varname:node_1903,prsc:2;n:type:ShaderForge.SFN_Add,id:181,x:31334,y:29604,varname:node_181,prsc:2|A-8428-OUT,B-4700-OUT;n:type:ShaderForge.SFN_Set,id:8290,x:32670,y:29698,varname:WaveMask2,prsc:2|IN-1537-OUT;n:type:ShaderForge.SFN_Vector4Property,id:599,x:30755,y:29433,ptovrint:False,ptlb:_ControlParticlePosition2,ptin:_ControlParticlePosition2,varname:__ControlParticlePosition2,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:0.5,v2:0.5,v3:0.5,v4:1;n:type:ShaderForge.SFN_ValueProperty,id:5443,x:30524,y:29708,ptovrint:False,ptlb:_ControlParticleSize2,ptin:_ControlParticleSize2,varname:__ControlParticleSize2,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:1;n:type:ShaderForge.SFN_Multiply,id:2435,x:31557,y:29648,varname:node_2435,prsc:2|A-181-OUT,B-9858-OUT;n:type:ShaderForge.SFN_Clamp,id:5411,x:31809,y:29697,varname:node_5411,prsc:2|IN-2435-OUT,MIN-8828-OUT,MAX-6096-OUT;n:type:ShaderForge.SFN_Frac,id:6258,x:31983,y:29697,varname:node_6258,prsc:2|IN-5411-OUT;n:type:ShaderForge.SFN_Multiply,id:893,x:32165,y:29656,varname:node_893,prsc:2|A-9883-OUT,B-6258-OUT;n:type:ShaderForge.SFN_Vector1,id:9883,x:31983,y:29633,varname:node_9883,prsc:2,v1:2;n:type:ShaderForge.SFN_Subtract,id:7446,x:32348,y:29698,varname:node_7446,prsc:2|A-893-OUT,B-4518-OUT;n:type:ShaderForge.SFN_Vector1,id:4518,x:32165,y:29786,varname:node_4518,prsc:2,v1:1;n:type:ShaderForge.SFN_Abs,id:1537,x:32512,y:29698,varname:node_1537,prsc:2|IN-7446-OUT;n:type:ShaderForge.SFN_Vector1,id:8828,x:31557,y:29781,varname:node_8828,prsc:2,v1:-0.5;n:type:ShaderForge.SFN_Vector1,id:6096,x:31557,y:29853,varname:node_6096,prsc:2,v1:0.5;n:type:ShaderForge.SFN_OneMinus,id:4700,x:30962,y:29699,varname:node_4700,prsc:2|IN-3019-OUT;n:type:ShaderForge.SFN_Get,id:9858,x:31313,y:29728,varname:node_9858,prsc:2|IN-6147-OUT;n:type:ShaderForge.SFN_Distance,id:1282,x:30970,y:29071,varname:node_1282,prsc:2|A-647-XYZ,B-3679-XYZ;n:type:ShaderForge.SFN_FragmentPosition,id:3679,x:30763,y:29128,varname:node_3679,prsc:2;n:type:ShaderForge.SFN_Add,id:7083,x:31342,y:29147,varname:node_7083,prsc:2|A-1282-OUT,B-7010-OUT;n:type:ShaderForge.SFN_Set,id:7054,x:32678,y:29241,varname:WaveMask3,prsc:2|IN-3953-OUT;n:type:ShaderForge.SFN_Vector4Property,id:647,x:30763,y:28976,ptovrint:False,ptlb:_ControlParticlePosition3,ptin:_ControlParticlePosition3,varname:__ControlParticlePosition3,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:0.5,v2:0.5,v3:0.5,v4:1;n:type:ShaderForge.SFN_ValueProperty,id:544,x:30496,y:29216,ptovrint:False,ptlb:_ControlParticleSize3,ptin:_ControlParticleSize3,varname:__ControlParticleSize3,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:1;n:type:ShaderForge.SFN_Multiply,id:6231,x:31565,y:29191,varname:node_6231,prsc:2|A-7083-OUT,B-2838-OUT;n:type:ShaderForge.SFN_Clamp,id:4048,x:31817,y:29240,varname:node_4048,prsc:2|IN-6231-OUT,MIN-2188-OUT,MAX-7029-OUT;n:type:ShaderForge.SFN_Frac,id:5202,x:31991,y:29240,varname:node_5202,prsc:2|IN-4048-OUT;n:type:ShaderForge.SFN_Multiply,id:7222,x:32173,y:29199,varname:node_7222,prsc:2|A-4733-OUT,B-5202-OUT;n:type:ShaderForge.SFN_Vector1,id:4733,x:31991,y:29176,varname:node_4733,prsc:2,v1:2;n:type:ShaderForge.SFN_Subtract,id:9386,x:32356,y:29241,varname:node_9386,prsc:2|A-7222-OUT,B-2150-OUT;n:type:ShaderForge.SFN_Vector1,id:2150,x:32173,y:29329,varname:node_2150,prsc:2,v1:1;n:type:ShaderForge.SFN_Abs,id:3953,x:32520,y:29241,varname:node_3953,prsc:2|IN-9386-OUT;n:type:ShaderForge.SFN_Vector1,id:2188,x:31565,y:29324,varname:node_2188,prsc:2,v1:-0.5;n:type:ShaderForge.SFN_Vector1,id:7029,x:31565,y:29396,varname:node_7029,prsc:2,v1:0.5;n:type:ShaderForge.SFN_OneMinus,id:7010,x:30970,y:29242,varname:node_7010,prsc:2|IN-8340-OUT;n:type:ShaderForge.SFN_Get,id:2838,x:31321,y:29271,varname:node_2838,prsc:2|IN-6147-OUT;n:type:ShaderForge.SFN_Distance,id:7751,x:30969,y:28616,varname:node_7751,prsc:2|A-2930-XYZ,B-6563-XYZ;n:type:ShaderForge.SFN_FragmentPosition,id:6563,x:30762,y:28673,varname:node_6563,prsc:2;n:type:ShaderForge.SFN_Add,id:3592,x:31341,y:28692,varname:node_3592,prsc:2|A-7751-OUT,B-6273-OUT;n:type:ShaderForge.SFN_Set,id:6246,x:32677,y:28786,varname:WaveMask4,prsc:2|IN-3406-OUT;n:type:ShaderForge.SFN_Vector4Property,id:2930,x:30762,y:28521,ptovrint:False,ptlb:_ControlParticlePosition4,ptin:_ControlParticlePosition4,varname:__ControlParticlePosition4,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:0.5,v2:0.5,v3:0.5,v4:1;n:type:ShaderForge.SFN_ValueProperty,id:3234,x:30518,y:28770,ptovrint:False,ptlb:_ControlParticleSize4,ptin:_ControlParticleSize4,varname:__ControlParticleSize4,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:1;n:type:ShaderForge.SFN_Multiply,id:5426,x:31564,y:28736,varname:node_5426,prsc:2|A-3592-OUT,B-6454-OUT;n:type:ShaderForge.SFN_Clamp,id:3518,x:31816,y:28785,varname:node_3518,prsc:2|IN-5426-OUT,MIN-6635-OUT,MAX-742-OUT;n:type:ShaderForge.SFN_Frac,id:6397,x:31990,y:28785,varname:node_6397,prsc:2|IN-3518-OUT;n:type:ShaderForge.SFN_Multiply,id:5943,x:32172,y:28744,varname:node_5943,prsc:2|A-4157-OUT,B-6397-OUT;n:type:ShaderForge.SFN_Vector1,id:4157,x:31990,y:28721,varname:node_4157,prsc:2,v1:2;n:type:ShaderForge.SFN_Subtract,id:9947,x:32355,y:28786,varname:node_9947,prsc:2|A-5943-OUT,B-1421-OUT;n:type:ShaderForge.SFN_Vector1,id:1421,x:32172,y:28874,varname:node_1421,prsc:2,v1:1;n:type:ShaderForge.SFN_Abs,id:3406,x:32519,y:28786,varname:node_3406,prsc:2|IN-9947-OUT;n:type:ShaderForge.SFN_Vector1,id:6635,x:31564,y:28869,varname:node_6635,prsc:2,v1:-0.5;n:type:ShaderForge.SFN_Vector1,id:742,x:31564,y:28941,varname:node_742,prsc:2,v1:0.5;n:type:ShaderForge.SFN_OneMinus,id:6273,x:30969,y:28787,varname:node_6273,prsc:2|IN-4324-OUT;n:type:ShaderForge.SFN_Get,id:6454,x:31320,y:28816,varname:node_6454,prsc:2|IN-6147-OUT;n:type:ShaderForge.SFN_Get,id:9340,x:32696,y:31731,varname:node_9340,prsc:2|IN-571-OUT;n:type:ShaderForge.SFN_Get,id:9645,x:32696,y:31793,varname:node_9645,prsc:2|IN-8290-OUT;n:type:ShaderForge.SFN_Get,id:8510,x:32696,y:31851,varname:node_8510,prsc:2|IN-7054-OUT;n:type:ShaderForge.SFN_Add,id:8185,x:33319,y:31801,varname:node_8185,prsc:2|A-1622-OUT,B-8095-OUT;n:type:ShaderForge.SFN_Get,id:2544,x:32696,y:31608,varname:node_2544,prsc:2|IN-6246-OUT;n:type:ShaderForge.SFN_SwitchProperty,id:8095,x:33079,y:31984,ptovrint:False,ptlb:Start Point Enabled,ptin:_StartPointEnabled,varname:node_8095,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,on:True|A-5948-OUT,B-1597-OUT;n:type:ShaderForge.SFN_SwitchProperty,id:1622,x:33086,y:31631,ptovrint:False,ptlb:Wave Enabled,ptin:_WaveEnabled,varname:node_1622,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,on:True|A-5700-OUT,B-7154-OUT;n:type:ShaderForge.SFN_Vector1,id:5700,x:32892,y:31608,varname:node_5700,prsc:2,v1:0;n:type:ShaderForge.SFN_Vector1,id:5948,x:32895,y:31948,varname:node_5948,prsc:2,v1:0;n:type:ShaderForge.SFN_ValueProperty,id:6276,x:31417,y:31751,ptovrint:False,ptlb:_StartLaserProgress,ptin:_StartLaserProgress,varname:node_6276,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:1;n:type:ShaderForge.SFN_Clamp01,id:6619,x:31595,y:31751,varname:node_6619,prsc:2|IN-6276-OUT;n:type:ShaderForge.SFN_OneMinus,id:7104,x:31752,y:31751,varname:node_7104,prsc:2|IN-6619-OUT;n:type:ShaderForge.SFN_Subtract,id:4315,x:32073,y:31995,varname:node_4315,prsc:2|A-4000-OUT,B-7104-OUT;n:type:ShaderForge.SFN_Vector1,id:8452,x:30564,y:30849,varname:node_8452,prsc:2,v1:1;n:type:ShaderForge.SFN_Add,id:7706,x:30763,y:30779,varname:node_7706,prsc:2|A-8424-OUT,B-8452-OUT;n:type:ShaderForge.SFN_Add,id:1570,x:30755,y:30225,varname:node_1570,prsc:2|A-8005-OUT,B-7151-OUT;n:type:ShaderForge.SFN_Vector1,id:7151,x:30577,y:30314,varname:node_7151,prsc:2,v1:1;n:type:ShaderForge.SFN_Add,id:3019,x:30755,y:29730,varname:node_3019,prsc:2|A-5443-OUT,B-8642-OUT;n:type:ShaderForge.SFN_Vector1,id:8642,x:30524,y:29774,varname:node_8642,prsc:2,v1:1;n:type:ShaderForge.SFN_Add,id:8340,x:30763,y:29264,varname:node_8340,prsc:2|A-544-OUT,B-8270-OUT;n:type:ShaderForge.SFN_Vector1,id:8270,x:30496,y:29291,varname:node_8270,prsc:2,v1:1;n:type:ShaderForge.SFN_Add,id:4324,x:30762,y:28810,varname:node_4324,prsc:2|A-3234-OUT,B-3742-OUT;n:type:ShaderForge.SFN_Vector1,id:3742,x:30518,y:28854,varname:node_3742,prsc:2,v1:1;n:type:ShaderForge.SFN_Divide,id:4308,x:30397,y:31687,varname:node_4308,prsc:2|A-5733-OUT,B-4535-OUT;n:type:ShaderForge.SFN_ValueProperty,id:4535,x:30199,y:31774,ptovrint:False,ptlb:_PSLossyScale,ptin:_PSLossyScale,varname:node_4535,prsc:2,glob:True,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,v1:1;n:type:ShaderForge.SFN_Subtract,id:9502,x:30530,y:32093,varname:node_9502,prsc:2|A-8243-OUT,B-4202-OUT;n:type:ShaderForge.SFN_Vector1,id:4202,x:30353,y:32185,varname:node_4202,prsc:2,v1:1;n:type:ShaderForge.SFN_Add,id:3590,x:30709,y:32093,varname:node_3590,prsc:2|A-9502-OUT,B-799-OUT;n:type:ShaderForge.SFN_Multiply,id:799,x:30530,y:32234,varname:node_799,prsc:2|A-4202-OUT,B-4535-OUT;n:type:ShaderForge.SFN_Multiply,id:7494,x:31043,y:32208,varname:node_7494,prsc:2|A-4535-OUT,B-2533-OUT;n:type:ShaderForge.SFN_Slider,id:9430,x:32006,y:33436,ptovrint:False,ptlb:GammaLinear,ptin:_GammaLinear,varname:node_9430,prsc:2,glob:False,taghide:False,taghdr:False,tagprd:False,tagnsco:False,tagnrm:False,min:0.2,cur:1,max:1;proporder:7529-8496-2701-99-8095-2533-2982-1622-5733-9430;pass:END;sub:END;*/

Shader "Sine VFX/V3DLasers/SmartWaveParticle" {
    Properties {
        _FinalColor ("Final Color", Color) = (0.5,0.5,0.5,1)
        _FinalPower ("Final Power", Range(0, 10)) = 1
        _Core ("Core", 2D) = "white" {}
        _Mask ("Mask", 2D) = "white" {}
        [MaterialToggle] _StartPointEnabled ("Start Point Enabled", Float ) = 0
        _StartPointMaskAdd ("Start Point Mask Add", Float ) = 0
        _StartPointMaskMultiply ("Start Point Mask Multiply", Range(0, 10)) = 2
        [MaterialToggle] _WaveEnabled ("Wave Enabled", Float ) = 1.771244
        _WaveLength ("Wave Length", Float ) = 1
        _GammaLinear ("GammaLinear", Range(0.2, 1)) = 1
    }
    SubShader {
        Tags {
            "IgnoreProjector"="True"
            "Queue"="Transparent"
            "RenderType"="Transparent"
        }
        Pass {
            Name "FORWARD"
            Tags {
                "LightMode"="ForwardBase"
            }
            Blend One One
            Cull Off
            ZWrite Off
            
            CGPROGRAM
            #pragma vertex vert
            #pragma fragment frag
            #define UNITY_PASS_FORWARDBASE
            #include "UnityCG.cginc"
            #pragma multi_compile_fwdbase
            #pragma multi_compile_fog
            #pragma only_renderers d3d9 d3d11 glcore gles gles3 metal d3d11_9x xboxone ps4 psp2 n3ds wiiu 
            #pragma target 3.0
            uniform sampler2D _Core; uniform float4 _Core_ST;
            uniform sampler2D _Mask; uniform float4 _Mask_ST;
            uniform float _FinalPower;
            uniform float4 _FinalColor;
            uniform float4 _StartLaserPosition;
            uniform float _StartPointMaskAdd;
            uniform float _StartPointMaskMultiply;
            uniform float4 _ControlParticlePosition0;
            uniform float _ControlParticleSize0;
            uniform float _WaveLength;
            uniform float4 _ControlParticlePosition1;
            uniform float _ControlParticleSize1;
            uniform float4 _ControlParticlePosition2;
            uniform float _ControlParticleSize2;
            uniform float4 _ControlParticlePosition3;
            uniform float _ControlParticleSize3;
            uniform float4 _ControlParticlePosition4;
            uniform float _ControlParticleSize4;
            uniform fixed _StartPointEnabled;
            uniform fixed _WaveEnabled;
            uniform float _StartLaserProgress;
            uniform float _PSLossyScale;
            uniform float _GammaLinear;
            struct VertexInput {
                float4 vertex : POSITION;
                float3 normal : NORMAL;
                float4 texcoord0 : TEXCOORD0;
                float4 vertexColor : COLOR;
            };
            struct VertexOutput {
                float4 pos : SV_POSITION;
                float4 uv0 : TEXCOORD0;
                float4 posWorld : TEXCOORD1;
                float3 normalDir : TEXCOORD2;
                float4 vertexColor : COLOR;
                UNITY_FOG_COORDS(3)
            };
            VertexOutput vert (VertexInput v) {
                VertexOutput o = (VertexOutput)0;
                o.uv0 = v.texcoord0;
                o.vertexColor = v.vertexColor;
                o.normalDir = UnityObjectToWorldNormal(v.normal);
                o.posWorld = mul(unity_ObjectToWorld, v.vertex);
                o.pos = UnityObjectToClipPos( v.vertex );
                UNITY_TRANSFER_FOG(o,o.pos);
                return o;
            }
            float4 frag(VertexOutput i, float facing : VFACE) : COLOR {
                float isFrontFace = ( facing >= 0 ? 1 : 0 );
                float faceSign = ( facing >= 0 ? 1 : -1 );
                i.normalDir = normalize(i.normalDir);
                i.normalDir *= faceSign;
                float3 viewDirection = normalize(_WorldSpaceCameraPos.xyz - i.posWorld.xyz);
                float3 normalDirection = i.normalDir;
////// Lighting:
////// Emissive:
                float2 node_5408 = float2(i.uv0.r,(i.uv0.g+i.uv0.b));
                float4 _Core_var = tex2D(_Core,TRANSFORM_TEX(node_5408, _Core));
                float4 _Mask_var = tex2D(_Mask,TRANSFORM_TEX(i.uv0, _Mask));
                float WL = (_WaveLength/_PSLossyScale);
                float WaveMask4 = abs(((2.0*frac(clamp(((distance(_ControlParticlePosition4.rgb,i.posWorld.rgb)+(1.0 - (_ControlParticleSize4+1.0)))*WL),(-0.5),0.5)))-1.0));
                float WaveMask0 = abs(((2.0*frac(clamp(((distance(_ControlParticlePosition0.rgb,i.posWorld.rgb)+(1.0 - (_ControlParticleSize0+1.0)))*WL),(-0.5),0.5)))-1.0));
                float WaveMask1 = abs(((2.0*frac(clamp(((distance(_ControlParticlePosition1.rgb,i.posWorld.rgb)+(1.0 - (_ControlParticleSize1+1.0)))*WL),(-0.5),0.5)))-1.0));
                float WaveMask2 = abs(((2.0*frac(clamp(((distance(_ControlParticlePosition2.rgb,i.posWorld.rgb)+(1.0 - (_ControlParticleSize2+1.0)))*WL),(-0.5),0.5)))-1.0));
                float WaveMask3 = abs(((2.0*frac(clamp(((distance(_ControlParticlePosition3.rgb,i.posWorld.rgb)+(1.0 - (_ControlParticleSize3+1.0)))*WL),(-0.5),0.5)))-1.0));
                float node_4202 = 1.0;
                float node_7494 = (_PSLossyScale*_StartPointMaskAdd);
                float node_8907 = 0.0;
                float node_8207 = 1.0;
                float DistanceMask = ((saturate((node_8907 + ( (((((1.0 - distance(_StartLaserPosition.rgb,i.posWorld.rgb))-node_4202)+(node_4202*_PSLossyScale))+node_7494) - node_8907) * (node_8207 - node_8907) ) / ((node_8207+node_7494) - node_8907)))-(1.0 - saturate(_StartLaserProgress)))*_StartPointMaskMultiply);
                float FinalMask = saturate((lerp( 0.0, (WaveMask4+WaveMask0+WaveMask1+WaveMask2+WaveMask3), _WaveEnabled )+lerp( 0.0, DistanceMask, _StartPointEnabled )));
                float3 emissive = ((_Core_var.r*_Mask_var.r*(1.0 - (1.0-max(0,dot(normalDirection, viewDirection))))*i.vertexColor.rgb)*_FinalPower*_FinalColor.rgb*FinalMask*_GammaLinear);
                float3 finalColor = emissive;
                fixed4 finalRGBA = fixed4(finalColor,1);
                UNITY_APPLY_FOG_COLOR(i.fogCoord, finalRGBA, fixed4(0,0,0,1));
                return finalRGBA;
            }
            ENDCG
        }
    }
    CustomEditor "ShaderForgeMaterialInspector"
}
